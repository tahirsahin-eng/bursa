PDF oluşturma sorununu kökten çözen, tüm metinleri temizlenmiş, görselleri tanımlanmış ve teknik hataları giderilmiş en güncel kod aşağıdadır.

Bu sürümde PDF kütüphanesinin çalışma mantığı, tarayıcı uyumluluğu için daha güvenli hale getirilmiş ve tüm [cite] simgeleri temizlenmiştir.
+2

HTML

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saffet Çam Ortaokulu - Uludağ Gezisi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8fafc; font-family: 'Inter', sans-serif; }
        .menu-option { cursor: pointer; border: 4px solid transparent; transition: all 0.2s; position: relative; }
        .menu-option.selected { border-color: #2563eb; transform: scale(1.02); background-color: #eff6ff; }
        .menu-option.selected::after { 
            content: '\f058'; font-family: 'Font Awesome 5 Free'; font-weight: 900;
            position: absolute; top: 10px; right: 10px; color: #2563eb; font-size: 24px; background: white; border-radius: 50%;
        }
        /* PDF Şablonu başlangıçta tamamen görünmez ve yer kaplamaz */
        #pdfSablon { position: absolute; left: -9999px; top: -9999px; background: white; }
    </style>
</head>
<body class="bg-slate-100 pb-20">

    <div class="max-w-4xl mx-auto bg-white shadow-xl mt-10 rounded-3xl overflow-hidden">
        <div class="bg-blue-800 p-8 text-white text-center">
            <h2 class="text-sm tracking-widest uppercase opacity-80">Saffet Çam Ortaokulu Müdürlüğü</h2>
            <h1 class="text-3xl font-bold mt-2 text-white">14 ŞUBAT ULUDAĞ GEZİSİ DUYURUSU</h1>
        </div>

        <div class="p-8">
            <h3 class="text-xl font-bold text-slate-800 mb-6 flex items-center">
                <i class="fas fa-utensils text-orange-500 mr-3"></i> Yemek Tercihinizi Seçiniz
            </h3>
            
            <div class="grid md:grid-cols-2 gap-6 mb-10">
                <div id="kofteCard" onclick="secYemek('Köfte Menü')" class="menu-option bg-white rounded-2xl shadow-sm border-2 border-slate-100 overflow-hidden">
                    <img src="WhatsApp Image 2026-01-05 at 17.59.04.jpeg" alt="Köfte Menü" class="w-full h-56 object-cover">
                    <div class="p-4 text-center">
                        <span class="font-bold text-slate-800">Tam Porsiyon Köfte Ekmek Menü</span>
                    </div>
                </div>

                <div id="donerCard" onclick="secYemek('Döner Menü')" class="menu-option bg-white rounded-2xl shadow-sm border-2 border-slate-100 overflow-hidden">
                    <img src="WhatsApp Image 2026-01-05 at 18.04.20.jpeg" alt="Döner Menü" class="w-full h-56 object-cover">
                    <div class="p-4 text-center">
                        <span class="font-bold text-slate-800">Patatesli Döner Ekmek Menü</span>
                    </div>
                </div>
            </div>

            <form id="geziFormu" class="space-y-6">
                <input type="hidden" id="secilenYemek" required>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <h4 class="font-bold text-blue-800 border-b pb-2">Öğrenci Bilgileri</h4>
                        <input type="text" id="ogrAd" placeholder="Adı Soyadı" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" required>
                        <input type="text" id="ogrTC" placeholder="T.C. Kimlik No" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" maxlength="11" required>
                        <input type="text" id="ogrSinif" placeholder="Sınıf / Okul No" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" required>
                    </div>
                    <div class="space-y-4">
                        <h4 class="font-bold text-blue-800 border-b pb-2">Veli Bilgileri</h4>
                        <input type="text" id="veliAd" placeholder="Veli Adı Soyadı" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" required>
                        <input type="tel" id="veliTel" placeholder="İletişim Telefonu" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" required>
                    </div>
                </div>

                <div class="bg-amber-50 p-4 rounded-xl text-sm text-amber-900 border border-amber-200 mt-6">
                    <p><strong>Bilgi:</strong> Gezi ücreti 1700 TL'dir ve en geç 5 Şubat 2026 tarihine kadar teslim edilmelidir.</p>
                    <p class="mt-1">Yanında yedek kıyafet bulundurmayan öğrencilerin sorumluluğu veliye aittir.</p>
                </div>

                <button type="button" onclick="pdfIndir()" class="w-full bg-blue-700 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-blue-800 transition">
                    <i class="fas fa-file-download mr-2"></i> BAŞVURUYU TAMAMLA VE PDF İNDİR
                </button>
            </form>
        </div>
    </div>

    <div id="pdfSablon" style="padding: 40px; width: 700px; color: black; background-color: white;">
        <div style="text-align: center; border-bottom: 2px solid black; padding-bottom: 20px; margin-bottom: 30px;">
            <h2 style="margin: 0; font-size: 20px;">SAFFET ÇAM ORTAOKULU MÜDÜRLÜĞÜ</h2>
            <h3 style="margin: 10px 0 0 0; font-size: 18px; text-decoration: underline;">14 ŞUBAT ULUDAĞ GEZİSİ VELİ İZİN BELGESİ</h3>
        </div>
        
        <p style="font-size: 16px; line-height: 1.6;">
            Velisi bulunduğum <strong id="p_ogrAd">....................</strong> isimli öğrencinin, 
            <strong>14 Şubat 2026</strong> tarihindeki geziye katılmasına izin veriyorum.
        </p>
        
        <table style="width: 100%; border-collapse: collapse; margin: 30px 0;">
            <tr><td style="border: 1px solid black; padding: 10px; font-weight: bold; width: 40%;">Öğrenci T.C. No:</td><td style="border: 1px solid black; padding: 10px;" id="p_ogrTC"></td></tr>
            <tr><td style="border: 1px solid black; padding: 10px; font-weight: bold;">Sınıf / Okul No:</td><td style="border: 1px solid black; padding: 10px;" id="p_ogrSinif"></td></tr>
            <tr><td style="border: 1px solid black; padding: 10px; font-weight: bold;">Yemek Tercihi:</td><td style="border: 1px solid black; padding: 10px; font-weight: bold; color: blue;" id="p_yemek"></td></tr>
            <tr><td style="border: 1px solid black; padding: 10px; font-weight: bold;">Veli Adı Soyadı:</td><td style="border: 1px solid black; padding: 10px;" id="p_veliAd"></td></tr>
            <tr><td style="border: 1px solid black; padding: 10px; font-weight: bold;">Veli İletişim:</td><td style="border: 1px solid black; padding: 10px;" id="p_veliTel"></td></tr>
        </table>

        <p style="font-size: 14px; margin-top: 20px;">
            Gezi ücretini ve bu belgeyi en geç <strong>5 Şubat 2026</strong> tarihine kadar Okul Aile Birliği Temsilcisi Fatma Erdem'e teslim edeceğimi beyan ederim.
        </p>
        
        <div style="margin-top: 80px; display: flex; justify-content: space-between;">
            <div style="font-size: 14px;">Tarih: ____ / ____ / 2026</div>
            <div style="text-align: center; font-weight: bold;">Veli İmza<br><br><br>_________________</div>
        </div>
    </div>

    <script>
        function secYemek(tip) {
            document.getElementById('secilenYemek').value = tip;
            document.getElementById('kofteCard').classList.remove('selected');
            document.getElementById('donerCard').classList.remove('selected');
            if(tip === 'Köfte Menü') document.getElementById('kofteCard').classList.add('selected');
            else document.getElementById('donerCard').classList.add('selected');
        }

        function pdfIndir() {
            const yemek = document.getElementById('secilenYemek').value;
            const ogrAd = document.getElementById('ogrAd').value;
            
            if(!yemek) { alert("Lütfen bir yemek tercihi yapınız!"); return; }
            if(!ogrAd) { alert("Lütfen öğrenci adını doldurunuz!"); return; }

            // Verileri aktar
            document.getElementById('p_ogrAd').innerText = ogrAd;
            document.getElementById('p_ogrTC').innerText = document.getElementById('ogrTC').value;
            document.getElementById('p_ogrSinif').innerText = document.getElementById('ogrSinif').value;
            document.getElementById('p_veliAd').innerText = document.getElementById('veliAd').value;
            document.getElementById('p_veliTel').innerText = document.getElementById('veliTel').value;
            document.getElementById('p_yemek').innerText = yemek.toUpperCase();

            const element = document.getElementById('pdfSablon');
            
            // PDF Ayarları
            const opt = {
                margin: 0.5,
                filename: 'Uludag_Gezisi_Izin_Belgesi.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            };

            // PDF oluştur ve indir
            html2pdf().from(element).set(opt).save().catch(err => console.error(err));
        }
    </script>
</body>
</html>
/uludag_gezi/
│
├── index.html          # Öğrenci başvuru formu
├── kaydet.php          # Form verilerini veritabanına kaydeder
├── panel.php           # Kontrol paneli (kayıtları listeler)
├── export_pdf.php      # PDF çıktısı
├── export_excel.php    # Excel çıktısı
├── db.php              # Veritabanı bağlantısı
└── vendor/             # PhpSpreadsheet ve TCPDF kütüphaneleri
<?php
$host = "localhost";
$user = "root";
$pass = "";
$db   = "okul";

$conn = new mysqli($host, $user, $pass, $db);
if ($conn->connect_error) {
    die("Bağlantı hatası: " . $conn->connect_error);
}
?>
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Uludağ Gezisi Başvuru</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 p-10">

  <h1 class="text-2xl font-bold mb-6">Uludağ Gezisi Başvuru Formu</h1>

  <form id="geziFormu" class="space-y-4">
    <input type="text" id="ogrAd" placeholder="Öğrenci Adı Soyadı" required class="border p-2 w-full">
    <input type="text" id="ogrTC" placeholder="T.C. Kimlik No" maxlength="11" required class="border p-2 w-full">
    <input type="text" id="ogrSinif" placeholder="Sınıf / Okul No" required class="border p-2 w-full">
    <input type="text" id="veliAd" placeholder="Veli Adı Soyadı" required class="border p-2 w-full">
    <input type="tel" id="veliTel" placeholder="Veli Telefon" required class="border p-2 w-full">

    <select id="secilenYemek" required class="border p-2 w-full">
      <option value="">Yemek Seçiniz</option>
      <option value="Köfte Menü">Köfte Menü</option>
      <option value="Döner Menü">Döner Menü</option>
    </select>

    <button type="button" onclick="kaydetVeritabani()" class="bg-blue-600 text-white px-4 py-2 rounded">
      Kaydı Gönder
    </button>
  </form>

  <script>
    function kaydetVeritabani() {
      const data = {
        ogrAd: document.getElementById('ogrAd').value,
        ogrTC: document.getElementById('ogrTC').value,
        ogrSinif: document.getElementById('ogrSinif').value,
        veliAd: document.getElementById('veliAd').value,
        veliTel: document.getElementById('veliTel').value,
        yemek: document.getElementById('secilenYemek').value
      };

      fetch("kaydet.php", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(res => alert(res.message))
      .catch(err => console.error(err));
    }
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Uludağ Gezisi Başvuru</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-100 p-10">

  <h1 class="text-2xl font-bold mb-6">Uludağ Gezisi Başvuru Formu</h1>

  <form id="geziFormu" class="space-y-4">
    <input type="text" id="ogrAd" placeholder="Öğrenci Adı Soyadı" required class="border p-2 w-full">
    <input type="text" id="ogrTC" placeholder="T.C. Kimlik No" maxlength="11" required class="border p-2 w-full">
    <input type="text" id="ogrSinif" placeholder="Sınıf / Okul No" required class="border p-2 w-full">
    <input type="text" id="veliAd" placeholder="Veli Adı Soyadı" required class="border p-2 w-full">
    <input type="tel" id="veliTel" placeholder="Veli Telefon" required class="border p-2 w-full">

    <select id="secilenYemek" required class="border p-2 w-full">
      <option value="">Yemek Seçiniz</option>
      <option value="Köfte Menü">Köfte Menü</option>
      <option value="Döner Menü">Döner Menü</option>
    </select>

    <button type="button" onclick="kaydetVeritabani()" class="bg-blue-600 text-white px-4 py-2 rounded">
      Kaydı Gönder
    </button>
  </form>

  <script>
    function kaydetVeritabani() {
      const data = {
        ogrAd: document.getElementById('ogrAd').value,
        ogrTC: document.getElementById('ogrTC').value,
        ogrSinif: document.getElementById('ogrSinif').value,
        veliAd: document.getElementById('veliAd').value,
        veliTel: document.getElementById('veliTel').value,
        yemek: document.getElementById('secilenYemek').value
      };

      fetch("kaydet.php", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(res => alert(res.message))
      .catch(err => console.error(err));
    }
  </script>
</body>
</html>

<?php
require 'vendor/autoload.php';
use PhpOffice\PhpSpreadsheet\Spreadsheet;
use PhpOffice\PhpSpreadsheet\Writer\Xlsx;
include "db.php";

$result = $conn->query("SELECT * FROM gezi_kayitlari");
$spreadsheet = new Spreadsheet();
$sheet = $spreadsheet->getActiveSheet();
$sheet->fromArray(['Ad Soyad','TC','Sınıf','Veli','Telefon','Yemek','Tarih'], NULL, 'A1');

$rowNum = 2;
while($row = $result->fetch_assoc()) {
    $sheet->fromArray([$row['ogrAd'],$row['ogrTC'],$row['ogrSinif'],$row['veliAd'],$row['veliTel'],$row['yemek'],$row['kayit_tarihi']], NULL, "A$rowNum");
    $rowNum++;
}

$writer = new Xlsx($spreadsheet);
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="gezi_kayitlari.xlsx"');
header('Cache-Control: max-age=0');
$writer->save('php://output');
?>
<?php
require 'vendor/autoload.php';
require_once('vendor/tecnickcom/tcpdf/tcpdf.php');
include "db.php";

$result = $conn->query("SELECT * FROM gezi_kayitlari");

$pdf = new TCPDF();
$pdf->AddPage();
$pdf->SetFont('dejavusans','',10);

$html = "<h2>Gezi Kayıtları</h2><table border='1' cellpadding='4'><tr><th>Ad Soyad</th><th>TC</th><th>Sınıf</th><th>Veli</th><th>Telefon</th><th>Yemek</th><th


